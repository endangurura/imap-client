import Compressor from './compression';
var MESSAGE_INITIALIZE_WORKER = 'start';
var MESSAGE_INFLATE = 'inflate';
var MESSAGE_INFLATED_DATA_READY = 'inflated_ready';
var MESSAGE_DEFLATE = 'deflate';
var MESSAGE_DEFLATED_DATA_READY = 'deflated_ready';

var createMessage = function createMessage(message, buffer) {
  return {
    message: message,
    buffer: buffer
  };
};

var inflatedReady = function inflatedReady(buffer) {
  return self.postMessage(createMessage(MESSAGE_INFLATED_DATA_READY, buffer), [buffer]);
};

var deflatedReady = function deflatedReady(buffer) {
  return self.postMessage(createMessage(MESSAGE_DEFLATED_DATA_READY, buffer), [buffer]);
};

var compressor = new Compressor(inflatedReady, deflatedReady);

self.onmessage = function (e) {
  var message = e.data.message;
  var buffer = e.data.buffer;

  switch (message) {
    case MESSAGE_INITIALIZE_WORKER:
      break;

    case MESSAGE_INFLATE:
      compressor.inflate(buffer);
      break;

    case MESSAGE_DEFLATE:
      compressor.deflate(buffer);
      break;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wcmVzc2lvbi13b3JrZXIuanMiXSwibmFtZXMiOlsiQ29tcHJlc3NvciIsIk1FU1NBR0VfSU5JVElBTElaRV9XT1JLRVIiLCJNRVNTQUdFX0lORkxBVEUiLCJNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFkiLCJNRVNTQUdFX0RFRkxBVEUiLCJNRVNTQUdFX0RFRkxBVEVEX0RBVEFfUkVBRFkiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsImJ1ZmZlciIsImluZmxhdGVkUmVhZHkiLCJzZWxmIiwicG9zdE1lc3NhZ2UiLCJkZWZsYXRlZFJlYWR5IiwiY29tcHJlc3NvciIsIm9ubWVzc2FnZSIsImUiLCJkYXRhIiwiaW5mbGF0ZSIsImRlZmxhdGUiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFVBQVAsTUFBdUIsZUFBdkI7QUFFQSxJQUFNQyx5QkFBeUIsR0FBRyxPQUFsQztBQUNBLElBQU1DLGVBQWUsR0FBRyxTQUF4QjtBQUNBLElBQU1DLDJCQUEyQixHQUFHLGdCQUFwQztBQUNBLElBQU1DLGVBQWUsR0FBRyxTQUF4QjtBQUNBLElBQU1DLDJCQUEyQixHQUFHLGdCQUFwQzs7QUFFQSxJQUFNQyxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLENBQUNDLE9BQUQsRUFBVUMsTUFBVjtBQUFBLFNBQXNCO0FBQUVELElBQUFBLE9BQU8sRUFBUEEsT0FBRjtBQUFXQyxJQUFBQSxNQUFNLEVBQU5BO0FBQVgsR0FBdEI7QUFBQSxDQUF0Qjs7QUFFQSxJQUFNQyxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLENBQUFELE1BQU07QUFBQSxTQUFJRSxJQUFJLENBQUNDLFdBQUwsQ0FBaUJMLGFBQWEsQ0FBQ0gsMkJBQUQsRUFBOEJLLE1BQTlCLENBQTlCLEVBQXFFLENBQUNBLE1BQUQsQ0FBckUsQ0FBSjtBQUFBLENBQTVCOztBQUNBLElBQU1JLGFBQWEsR0FBRyxTQUFoQkEsYUFBZ0IsQ0FBQUosTUFBTTtBQUFBLFNBQUlFLElBQUksQ0FBQ0MsV0FBTCxDQUFpQkwsYUFBYSxDQUFDRCwyQkFBRCxFQUE4QkcsTUFBOUIsQ0FBOUIsRUFBcUUsQ0FBQ0EsTUFBRCxDQUFyRSxDQUFKO0FBQUEsQ0FBNUI7O0FBQ0EsSUFBTUssVUFBVSxHQUFHLElBQUliLFVBQUosQ0FBZVMsYUFBZixFQUE4QkcsYUFBOUIsQ0FBbkI7O0FBRUFGLElBQUksQ0FBQ0ksU0FBTCxHQUFpQixVQUFVQyxDQUFWLEVBQWE7QUFDNUIsTUFBTVIsT0FBTyxHQUFHUSxDQUFDLENBQUNDLElBQUYsQ0FBT1QsT0FBdkI7QUFDQSxNQUFNQyxNQUFNLEdBQUdPLENBQUMsQ0FBQ0MsSUFBRixDQUFPUixNQUF0Qjs7QUFFQSxVQUFRRCxPQUFSO0FBQ0UsU0FBS04seUJBQUw7QUFDRTs7QUFFRixTQUFLQyxlQUFMO0FBQ0VXLE1BQUFBLFVBQVUsQ0FBQ0ksT0FBWCxDQUFtQlQsTUFBbkI7QUFDQTs7QUFFRixTQUFLSixlQUFMO0FBQ0VTLE1BQUFBLFVBQVUsQ0FBQ0ssT0FBWCxDQUFtQlYsTUFBbkI7QUFDQTtBQVZKO0FBWUQsQ0FoQkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcHJlc3NvciBmcm9tICcuL2NvbXByZXNzaW9uJ1xuXG5jb25zdCBNRVNTQUdFX0lOSVRJQUxJWkVfV09SS0VSID0gJ3N0YXJ0J1xuY29uc3QgTUVTU0FHRV9JTkZMQVRFID0gJ2luZmxhdGUnXG5jb25zdCBNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFkgPSAnaW5mbGF0ZWRfcmVhZHknXG5jb25zdCBNRVNTQUdFX0RFRkxBVEUgPSAnZGVmbGF0ZSdcbmNvbnN0IE1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSA9ICdkZWZsYXRlZF9yZWFkeSdcblxuY29uc3QgY3JlYXRlTWVzc2FnZSA9IChtZXNzYWdlLCBidWZmZXIpID0+ICh7IG1lc3NhZ2UsIGJ1ZmZlciB9KVxuXG5jb25zdCBpbmZsYXRlZFJlYWR5ID0gYnVmZmVyID0+IHNlbGYucG9zdE1lc3NhZ2UoY3JlYXRlTWVzc2FnZShNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFksIGJ1ZmZlciksIFtidWZmZXJdKVxuY29uc3QgZGVmbGF0ZWRSZWFkeSA9IGJ1ZmZlciA9PiBzZWxmLnBvc3RNZXNzYWdlKGNyZWF0ZU1lc3NhZ2UoTUVTU0FHRV9ERUZMQVRFRF9EQVRBX1JFQURZLCBidWZmZXIpLCBbYnVmZmVyXSlcbmNvbnN0IGNvbXByZXNzb3IgPSBuZXcgQ29tcHJlc3NvcihpbmZsYXRlZFJlYWR5LCBkZWZsYXRlZFJlYWR5KVxuXG5zZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBlLmRhdGEubWVzc2FnZVxuICBjb25zdCBidWZmZXIgPSBlLmRhdGEuYnVmZmVyXG5cbiAgc3dpdGNoIChtZXNzYWdlKSB7XG4gICAgY2FzZSBNRVNTQUdFX0lOSVRJQUxJWkVfV09SS0VSOlxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgTUVTU0FHRV9JTkZMQVRFOlxuICAgICAgY29tcHJlc3Nvci5pbmZsYXRlKGJ1ZmZlcilcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlIE1FU1NBR0VfREVGTEFURTpcbiAgICAgIGNvbXByZXNzb3IuZGVmbGF0ZShidWZmZXIpXG4gICAgICBicmVha1xuICB9XG59XG4iXX0=